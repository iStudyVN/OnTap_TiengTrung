<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcard Tiếng Trung</title>
    <style>
        /* CSS để nhúng font Simsun */
        @font-face {
            font-family: 'Simsun';
            src: url(https://fonts.gstatic.com/s/simsun/v18/K9-BZD0b9T8xcP0Q.woff2) format('woff2');
            unicode-range: U+4E00-9FFF; /* Phạm vi cho ký tự Hán */
        }

        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 500px;
            padding: 20px;
            text-align: center;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .scene {
            width: 100%;
            height: 300px;
            perspective: 600px;
            position: relative;
        }

        .card {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            cursor: pointer;
            transition: 
                transform 0.6s, 
                opacity 0.3s, 
                left 0.4s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        /* --- HIỆU ỨNG TRƯỢT --- */
        .card.slide-next-out {
            transform: translateX(-100%) rotateY(0deg); 
            opacity: 0;
            pointer-events: none;
        }

        .card.slide-prev-out {
            transform: translateX(100%) rotateY(0deg); 
            opacity: 0;
            pointer-events: none;
        }

        .card__face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; 
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 12px;
            background: #ffffff;
        }

        /* YÊU CẦU: Mặt trước chữ Hán, font Simsun, màu đen, ở giữa */
        .card__face--front {
            font-family: 'Simsun', sans-serif; 
            font-size: 80px;
            color: #000000; /* Chữ màu đen */
        }

        .card__face--back {
            transform: rotateY(180deg);
            padding: 20px;
            box-sizing: border-box;
            flex-direction: column;
            align-items: center; 
            justify-content: center;
            text-align: center; 
            background: linear-gradient(135deg, #ecf0f1, #bdc3c7);
        }
        
        .back-content p {
            font-size: 1.3rem;
            margin: 8px 0;
            width: 100%;
            text-align: center; 
            font-weight: 500;
        }
        
        .back-content .pinyin { color: #e67e22; font-weight: bold; font-size: 1.6rem; } /* Màu cam */
        .back-content .hanviet { color: #8e44ad; } /* Màu tím */
        .back-content .nghia { color: #1f506b; font-style: italic; } /* Màu xanh đậm (thay vì #27ae60) */
        .back-content .vidu-han { color: #000000; font-family: 'Simsun', sans-serif; margin-top: 15px; font-size: 1.5rem; } /* Chữ Hán đen */
        .back-content .dichnghia { color: #000000; font-style: italic; font-size: 1rem; } /* Chữ đen */


        .navigation {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-button {
            padding: 10px 20px;
            border: none;
            background-color: #3498db;
            color: white;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 0 5px;
        }

        .nav-button:hover {
            background-color: #2980b9;
        }
        
        #counter {
            font-size: 1.1rem;
            font-weight: bold;
            color: #7f8c8d;
            flex-grow: 1;
            text-align: center;
        }
        
        .jump-control {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
            gap: 10px;
            flex-wrap: wrap;
        }

        #jump-input {
            width: 60px;
            padding: 8px;
            border: 2px solid #3498db;
            border-radius: 8px;
            text-align: center;
            font-size: 1rem;
        }
        
        .jump-button {
            background-color: #e74c3c; 
        }
        
        .jump-button:hover {
            background-color: #c0392b;
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>Flashcard Tiếng Trung</h1>
        <div class="scene">
            <div id="flashcard-container"></div>
        </div>
        <div class="navigation">
            <button class="nav-button" id="prev-btn">Trước</button>
            <span id="counter"></span>
            <button class="nav-button" id="next-btn">Sau</button>
        </div>
        
        <div class="jump-control">
            <input type="number" id="jump-input" min="1" max="30" placeholder="#">
            <button class="nav-button jump-button" id="jump-btn">Nhảy đến thẻ số</button>
        </div>
    </div>

    <script>
        // 30 từ vựng Hán ngữ giản thể được lấy từ shengci.txt
        const cardData = [
            { hanzi: '在', pinyin: 'zài', hanviet: 'Tại, Tại chỗ', nghia: 'Đang (phó từ); Ở (động từ)', vidu: '他正在学习呢。', dichnghia: 'Anh ấy đang học bài đấy.' },
            { hanzi: '正在', pinyin: 'zhèngzài', hanviet: 'Chính tại', nghia: 'Đang, chính đang (nhấn mạnh sự tiếp diễn)', vidu: '妈妈正在做饭。', dichnghia: 'Mẹ đang nấu cơm.' },
            { hanzi: '正', pinyin: 'zhèng', hanviet: 'Chính', nghia: 'Đang, chính đang (nhấn mạnh)', vidu: '我正想去书店。', dichnghia: 'Tôi cũng đang muốn đi hiệu sách.' },
            { hanzi: '出来', pinyin: 'chūlai', hanviet: 'Xuất lai', nghia: 'Ra đây (chỉ hướng từ trong ra ngoài, gần người nói)', vidu: '请你快点出来。', dichnghia: 'Mời bạn nhanh chóng ra đây.' },
            { hanzi: '来', pinyin: 'lái', hanviet: 'Lai', nghia: 'Đến, tới', vidu: '他明天会来我家。', dichnghia: 'Ngày mai anh ấy sẽ đến nhà tôi.' },
            { hanzi: '音乐', pinyin: 'yīnyuè', hanviet: 'Âm nhạc', nghia: 'Âm nhạc', vidu: '我喜欢听音乐。', dichnghia: 'Tôi thích nghe nhạc.' },
            { hanzi: '没有', pinyin: 'méiyǒu', hanviet: 'Một hữu', nghia: 'Không có (phủ định của 有); Chưa (phủ định của hành động đã xảy ra)', vidu: '我没有在看电视。', dichnghia: 'Tôi không đang xem TV.' },
            { hanzi: '录音', pinyin: 'lùyīn', hanviet: 'Lục âm', nghia: 'Ghi âm, băng ghi âm', vidu: '请你听录音。', dichnghia: 'Mời bạn nghe băng ghi âm.' },
            { hanzi: '事', pinyin: 'shì', hanviet: 'Sự', nghia: 'Sự việc, việc, chuyện', vidu: '你有什么事吗？', dichnghia: 'Bạn có việc gì không?' },
            { hanzi: '书店', pinyin: 'shūdiàn', hanviet: 'Thư điếm', nghia: 'Hiệu sách, tiệm sách', vidu: '我们去书店买书。', dichnghia: 'Chúng tôi đi hiệu sách mua sách.' },
            { hanzi: '想', pinyin: 'xiǎng', hanviet: 'Tưởng', nghia: 'Muốn, nghĩ', vidu: '你想买什么书？', dichnghia: 'Bạn muốn mua sách gì?' },
            { hanzi: '汉英', pinyin: 'Hàn-Yīng', hanviet: 'Hán-Anh', nghia: 'Hán-Anh (Trung-Anh)', vidu: '我要买一本汉英词典。', dichnghia: 'Tôi muốn mua một cuốn từ điển Hán-Anh.' },
            { hanzi: '坐', pinyin: 'zuò', hanviet: 'Tọa', nghia: 'Ngồi, đi (xe, thuyền...)', vidu: '坐车太挤了。', dichnghia: 'Ngồi xe đông (chật) lắm.' },
            { hanzi: '综合', pinyin: 'zōnghé', hanviet: 'Tông hợp', nghia: 'Tổng hợp', vidu: '我们有综合课。', dichnghia: 'Chúng tôi có môn Tổng hợp.' },
            { hanzi: '口语', pinyin: 'kǒuyǔ', hanviet: 'Khẩu ngữ', nghia: 'Khẩu ngữ, tiếng nói', vidu: '我正在学口语。', dichnghia: 'Tôi đang học khẩu ngữ.' },
            { hanzi: '听力', pinyin: 'tīnglì', hanviet: 'Thính lực', nghia: 'Nghe hiểu', vidu: '她的听力很好。', dichnghia: 'Khả năng nghe hiểu của cô ấy rất tốt.' },
            { hanzi: '阅读', pinyin: 'yuèdú', hanviet: 'Duyệt độc', nghia: 'Đọc hiểu', vidu: '他喜欢阅读。', dichnghia: 'Anh ấy thích đọc sách.' },
            { hanzi: '文化', pinyin: 'wénhuà', hanviet: 'Văn hóa', nghia: 'Văn hóa', vidu: '中国文化很有意思。', dichnghia: 'Văn hóa Trung Quốc rất thú vị.' },
            { hanzi: '骑', pinyin: 'qí', hanviet: 'Kỵ', nghia: 'Cưỡi, đi (xe đạp, xe máy, ngựa)', vidu: '我们骑车去吧。', dichnghia: 'Chúng ta đi xe đạp đi.' },
            { hanzi: '行', pinyin: 'xíng', hanviet: 'Hành', nghia: 'Được, OK (biểu thị sự đồng ý)', vidu: '你觉得可以吗？行！', dichnghia: 'Bạn thấy có được không? Được!' },
            { hanzi: '门', pinyin: 'mén', hanviet: 'Môn', nghia: 'Môn (lượng từ cho môn học)', vidu: '我们有四门课。', dichnghia: 'Chúng tôi có bốn môn học.' },
            { hanzi: '课', pinyin: 'kè', hanviet: 'Khóa', nghia: 'Bài học, môn học, tiết học', vidu: '我们正在上课呢。', dichnghia: 'Chúng tôi đang lên lớp (học) đấy.' },
            { hanzi: '体育', pinyin: 'tǐyù', hanviet: 'Thể dục', nghia: 'Thể dục, thể thao', vidu: '我喜欢上体育课。', dichnghia: 'Tôi thích học môn thể dục.' },
            { hanzi: '教', pinyin: 'jiāo', hanviet: 'Giáo', nghia: 'Dạy, giảng dạy', vidu: '谁教你们汉语？', dichnghia: 'Ai dạy các bạn tiếng Hán?' },
            { hanzi: '挤', pinyin: 'jǐ', hanviet: 'Tễ', nghia: 'Chật chội, chen chúc, bóp, nặn', vidu: '坐车太挤了。', dichnghia: 'Ngồi xe chật lắm rồi.' },
            { hanzi: '出去', pinyin: 'chūqu', hanviet: 'Xuất khứ', nghia: 'Ra ngoài, đi ra kia (chỉ hướng từ trong ra ngoài, xa người nói)', vidu: '你快出去玩吧。', dichnghia: 'Con mau đi ra ngoài chơi đi.' },
            { hanzi: '录音机', pinyin: 'lùyīnjī', hanviet: 'Lục âm cơ', nghia: 'Máy ghi âm', vidu: '我没有录音机。', dichnghia: 'Tôi không có máy ghi âm.' },
            { hanzi: '药店', pinyin: 'yàodiàn', hanviet: 'Dược điếm', nghia: 'Hiệu thuốc, tiệm thuốc', vidu: '生病要去药店买药。', dichnghia: 'Ốm phải đến hiệu thuốc mua thuốc.' },
            { hanzi: '酒店', pinyin: 'jiǔdiàn', hanviet: 'Tửu điếm', nghia: 'Khách sạn', vidu: '旅行时我会选择酒店。', dichnghia: 'Khi du lịch tôi sẽ chọn khách sạn.' },
            { hanzi: '词典', pinyin: 'cídiǎn', hanviet: 'Từ điển', nghia: 'Từ điển', vidu: '我要买词典。', dichnghia: 'Tôi muốn mua từ điển.' },
            { hanzi: '件', pinyin: 'jiàn', hanviet: 'Kiện', nghia: 'Cái, chiếc, việc (lượng từ của 事)', vidu: '这是一件小事。', dichnghia: 'Đây là một việc nhỏ.' },
            { hanzi: '没事', pinyin: 'méishì', hanviet: 'Một sự', nghia: 'Không sao (không có việc gì, không bận)', vidu: '你没事吧？我没事。', dichnghia: 'Bạn không sao chứ? Tôi không sao.' },
            { hanzi: '节', pinyin: 'jié', hanviet: 'Tiết', nghia: 'Tiết (lượng từ cho tiết học, ngày lễ)', vidu: '今天我有一节课。', dichnghia: 'Hôm nay tôi có một tiết học.' },
            { hanzi: '教师', pinyin: 'jiàoshī', hanviet: 'Giáo sư', nghia: 'Giáo viên, thầy cô', vidu: '他是一位好教师。', dichnghia: 'Ông ấy là một giáo viên tốt.' },
            { hanzi: '教师节', pinyin: 'jiàoshījié', hanviet: 'Giáo sư tiết', nghia: 'Ngày Nhà giáo', vidu: '祝老师教师节快乐。', dichnghia: 'Chúc thầy cô ngày Nhà giáo vui vẻ.' },
            { hanzi: '教室', pinyin: 'jiàoshì', hanviet: 'Giáo thất', nghia: 'Phòng học, phòng dạy học', vidu: '我们在教室上课。', dichnghia: 'Chúng tôi học trong phòng học.' },
            { hanzi: '听课文录音', pinyin: 'tīng kèwén lùyīn', hanviet: 'Thính khóa văn lục âm', nghia: 'Nghe băng ghi âm bài khóa', vidu: '我正在听课文录音呢。', dichnghia: 'Tôi đang nghe băng ghi âm bài khóa đấy.' },
            { hanzi: '预习', pinyin: 'yùxí', hanviet: 'Dự tập', nghia: 'Chuẩn bị bài trước', vidu: '他在预习课文。', dichnghia: 'Anh ấy đang chuẩn bị trước bài khóa.' },
            { hanzi: '课文', pinyin: 'kèwén', hanviet: 'Khóa văn', nghia: 'Bài khóa', vidu: '我正在读课文。', dichnghia: 'Tôi đang đọc bài khóa.' },
            { hanzi: '看电视', pinyin: 'kàn diànshì', hanviet: 'Khán điện thị', nghia: 'Xem TV', vidu: '他正在看电视呢。', dichnghia: 'Anh ấy đang xem TV đấy.' },
            { hanzi: '上课', pinyin: 'shàngkè', hanviet: 'Thượng khóa', nghia: 'Lên lớp, đi học', vidu: '他们正上课呢。', dichnghia: 'Họ đang học đấy.' },
            { hanzi: '喝酒', pinyin: 'hē jiǔ', hanviet: 'Hát tửu', nghia: 'Uống rượu', vidu: '他在喝酒呢。', dichnghia: 'Anh ấy đang uống rượu đấy.' },
            { hanzi: '洗澡', pinyin: 'xǐ zǎo', hanviet: 'Tẩy tảo', nghia: 'Tắm', vidu: '我正洗澡呢。', dichnghia: 'Tôi đang tắm đấy.' },
            { hanzi: '打电话', pinyin: 'dǎ diànhuà', hanviet: 'Đả điện thoại', nghia: 'Gọi điện thoại', vidu: '你给我打电话的时候...', dichnghia: 'Lúc bạn gọi điện thoại cho tôi...' },
            { hanzi: '学习', pinyin: 'xuéxí', hanviet: 'Học tập', nghia: 'Học tập', vidu: '我在学习呢。', dichnghia: 'Tôi đang học bài đấy.' },
            { hanzi: '是', pinyin: 'shì', hanviet: 'Thị', nghia: 'Là', vidu: '他是不是在听音乐？', dichnghia: 'Anh ấy có phải đang nghe nhạc không?' },
            { hanzi: '认识', pinyin: 'rènshi', hanviet: 'Nhận thức', nghia: 'Nhận biết, quen biết', vidu: '我不认识他。', dichnghia: 'Tôi không quen anh ấy.' },
            { hanzi: '留学生', pinyin: 'liúxuésheng', hanviet: 'Lưu học sinh', nghia: 'Du học sinh', vidu: '她是一位留学生。', dichnghia: 'Cô ấy là một du học sinh.' },
            { hanzi: '妈妈', pinyin: 'māma', hanviet: 'Mụ mụ', nghia: 'Mẹ', vidu: '妈妈正在做晚饭。', dichnghia: 'Mẹ đang làm bữa tối.' },
            { hanzi: '做晚饭', pinyin: 'zuò wǎnfàn', hanviet: 'Tọa vãn phạn', nghia: 'Làm bữa tối, nấu bữa tối', vidu: '她正在做晚饭。', dichnghia: 'Cô ấy đang nấu bữa tối.' },
            { hanzi: '经理', pinyin: 'jīnglǐ', hanviet: 'Kinh lí', nghia: 'Giám đốc, quản lý', vidu: '王经理正在准备去上班。', dichnghia: 'Giám đốc Vương đang chuẩn bị đi làm.' },
            { hanzi: '准备', pinyin: 'zhǔnbèi', hanviet: 'Chuẩn bị', nghia: 'Chuẩn bị', vidu: '我准备好了。', dichnghia: 'Tôi chuẩn bị xong rồi.' },
            { hanzi: '上班', pinyin: 'shàngbān', hanviet: 'Thượng ban', nghia: 'Đi làm', vidu: '他去上班了。', dichnghia: 'Anh ấy đi làm rồi.' },
            { hanzi: '朋友', pinyin: 'péngyǒu', hanviet: 'Bằng hữu', nghia: 'Bạn bè', vidu: '我和朋友正在吃宵夜。', dichnghia: 'Tôi và bạn bè đang ăn khuya.' },
            { hanzi: '吃宵夜', pinyin: 'chī xiāoyè', hanviet: 'Cật tiêu dạ', nghia: 'Ăn khuya', vidu: '我们一起吃宵夜吧。', dichnghia: 'Chúng ta cùng nhau ăn khuya đi.' },
            { hanzi: '请', pinyin: 'qǐng', hanviet: 'Thỉnh', nghia: 'Mời', vidu: '我请你吃饭。', dichnghia: 'Tôi mời bạn ăn cơm.' },
            { hanzi: '火锅', pinyin: 'huǒguō', hanviet: 'Hỏa oa', nghia: 'Lẩu', vidu: '我正想请你吃火锅。', dichnghia: 'Tôi đang muốn mời bạn ăn lẩu.' },
            { hanzi: '做作业', pinyin: 'zuò zuòyè', hanviet: 'Tọa tác nghiệp', nghia: 'Làm bài tập về nhà', vidu: '我在做作业呢。', dichnghia: 'Tôi đang làm bài tập về nhà đấy.' },
            { hanzi: '忙', pinyin: 'máng', hanviet: 'Mang', nghia: 'Bận', vidu: '我现在在忙点事儿。', dichnghia: 'Bây giờ tôi đang bận chút việc.' },
            { hanzi: '一会儿', pinyin: 'yíhuìr', hanviet: 'Nhất hội nhi', nghia: 'Một lát, một chút', vidu: '我们一会儿再聊。', dichnghia: 'Lát nữa chúng ta nói chuyện tiếp nhé.' },
            { hanzi: '聊天', pinyin: 'liáotiān', hanviet: 'Liêu thiên', nghia: 'Trò chuyện, tán gẫu', vidu: '咱们再聊天吧。', dichnghia: 'Chúng ta trò chuyện tiếp nhé!' },
            { hanzi: '工作', pinyin: 'gōngzuò', hanviet: 'Công tác', nghia: 'Công việc, làm việc', vidu: '妈妈还要工作。', dichnghia: 'Mẹ còn phải làm việc.' },
            { hanzi: '玩', pinyin: 'wán', hanviet: 'Ngoạn', nghia: 'Chơi', vidu: '你快出去玩吧。', dichnghia: 'Con mau ra ngoài chơi đi.' },
            { hanzi: '回答问题', pinyin: 'huídá wèntí', hanviet: 'Hồi đáp vấn đề', nghia: 'Trả lời câu hỏi', vidu: '请回答问题。', dichnghia: 'Mời trả lời câu hỏi.' },
            { hanzi: '常', pinyin: 'cháng', hanviet: 'Thường', nghia: 'Thường, thường xuyên', vidu: '你常听音乐吗？', dichnghia: 'Bạn có thường nghe nhạc không?' },
            { hanzi: '哪国', pinyin: 'nǎ guó', hanviet: 'Na quốc', nghia: 'Nước nào', vidu: '你常听哪国的音乐？', dichnghia: 'Bạn thường nghe nhạc của nước nào?' },
            { hanzi: '药', pinyin: 'yào', hanviet: 'Dược', nghia: 'Thuốc', vidu: '药店买药。', dichnghia: 'Mua thuốc ở hiệu thuốc.' },
            { hanzi: '一般', pinyin: 'yìbān', hanviet: 'Nhất ban', nghia: 'Bình thường, thông thường', vidu: '你一般在书店买什么书？', dichnghia: 'Bạn thường mua sách gì ở hiệu sách?' },
            { hanzi: '生病', pinyin: 'shēngbìng', hanviet: 'Sinh bệnh', nghia: 'Sinh bệnh, bị ốm', vidu: '生病的时候...', dichnghia: 'Khi bị ốm...' },
            { hanzi: '看医生', pinyin: 'kàn yīshēng', hanviet: 'Khán y sinh', nghia: 'Đi khám bác sĩ', vidu: '去看医生。', dichnghia: 'Đi gặp bác sĩ.' },
            { hanzi: '旅行', pinyin: 'lǚxíng', hanviet: 'Lữ hành', nghia: 'Du lịch', vidu: '旅行时你会选择酒店。', dichnghia: 'Khi du lịch bạn sẽ chọn khách sạn.' },
            { hanzi: '选择', pinyin: 'xuǎnzé', hanviet: 'Tuyển trạch', nghia: 'Lựa chọn', vidu: '你会选择什么？', dichnghia: 'Bạn sẽ lựa chọn gì?' },
            { hanzi: '星级', pinyin: 'xīng jí', hanviet: 'Tinh cấp', nghia: 'Hạng sao (khách sạn)', vidu: '住几星级酒店？', dichnghia: 'Ở khách sạn mấy sao?' },
            { hanzi: '舒服', pinyin: 'shūfu', hanviet: 'Thư phục', nghia: 'Dễ chịu, thoải mái', vidu: '房间很舒服。', dichnghia: 'Căn phòng rất thoải mái.' },
            { hanzi: '怎么样', pinyin: 'zěnmeyàng', hanviet: 'Chẩm ma dạng', nghia: 'Thế nào, làm sao', vidu: '骑车去怎么样？', dichnghia: 'Đi xe đạp thì sao?' },
            { hanzi: '进去', pinyin: 'jìnqu', hanviet: 'Tiến khứ', nghia: 'Đi vào, chen vào (chỉ hướng)', vidu: '我要挤进去。', dichnghia: 'Tôi phải chen vào.' },
            { hanzi: '痘痘', pinyin: 'dòudou', hanviet: 'Đậu đậu', nghia: 'Mụn', vidu: '挤痘痘。', dichnghia: 'Nặn mụn.' },
            { hanzi: '每周', pinyin: 'měi zhōu', hanviet: 'Mỗi chu', nghia: 'Mỗi tuần', vidu: '现在每周我们只有一门课。', dichnghia: 'Bây giờ mỗi tuần chúng tôi chỉ có một môn học.' },
            { hanzi: '晚上', pinyin: 'wǎnshang', hanviet: 'Vãn thượng', nghia: 'Buổi tối', vidu: '周二四六晚上...', dichnghia: 'Tối thứ ba, tư, sáu...' },
            { hanzi: '谁', pinyin: 'shuí/shéi', hanviet: 'Thùy', nghia: 'Ai', vidu: '谁教你们汉语课？', dichnghia: 'Ai dạy các bạn môn tiếng Hán?' },
            { hanzi: '汉语', pinyin: 'hànyǔ', hanviet: 'Hán ngữ', nghia: 'Tiếng Hán', vidu: '谁教你们汉语课？', dichnghia: 'Ai dạy các bạn môn tiếng Hán?' },
            { hanzi: '祝', pinyin: 'zhù', hanviet: 'Chúc', nghia: 'Chúc', vidu: '祝老师教师节快乐。', dichnghia: 'Chúc thầy cô ngày Nhà giáo vui vẻ.' },
            { hanzi: '快乐', pinyin: 'kuàilè', hanviet: 'Khoái lạc', nghia: 'Vui vẻ, hạnh phúc', vidu: '祝你快乐。', dichnghia: 'Chúc bạn vui vẻ.' },
            { hanzi: '怎么', pinyin: 'zěnme', hanviet: 'Chẩm ma', nghia: 'Làm sao, bằng cách nào', vidu: '咱们怎么去呢？', dichnghia: 'Chúng ta đi bằng cách nào đây?' },
            { hanzi: '宿舍', pinyin: 'sùshè', hanviet: 'Túc xá', nghia: 'Ký túc xá', vidu: '麦克在不在宿舍？', dichnghia: 'Mike có ở ký túc xá không?' },
            { hanzi: '同屋', pinyin: 'tóngwū', hanviet: 'Đồng ốc', nghia: 'Bạn cùng phòng', vidu: '她问麦克的同屋。', dichnghia: 'Cô ấy hỏi bạn cùng phòng của Mike.' },
            { hanzi: '今天星期六', pinyin: 'jīntiān xīngqīliù', hanviet: 'Kim thiên tinh kỳ lục', nghia: 'Hôm nay thứ bảy', vidu: '今天星期六，坐车太挤。', dichnghia: 'Hôm nay thứ bảy, đi xe đông lắm.' },
            { hanzi: '一起', pinyin: 'yìqǐ', hanviet: 'Nhất khởi', nghia: 'Cùng nhau', vidu: '我们一起去书店。', dichnghia: 'Chúng ta cùng nhau đi hiệu sách.' },
            { hanzi: '为什么', pinyin: 'wèishénme', hanviet: 'Vị thập ma', nghia: 'Tại sao', vidu: '他们为什么不坐车去？', dichnghia: 'Tại sao họ không đi bằng xe?' },
            { hanzi: '只', pinyin: 'zhǐ', hanviet: 'Chỉ', nghia: 'Chỉ, duy nhất', vidu: '现在只有四门课。', dichnghia: 'Hiện tại chỉ có bốn môn học.' },
            { hanzi: '唱歌', pinyin: 'chànggē', hanviet: 'Xướng ca', nghia: 'Hát', vidu: '她正在唱歌呢。', dichnghia: 'Cô ấy đang hát đấy.' },
            { hanzi: '跳舞', pinyin: 'tiàowǔ', hanviet: 'Khiêu vũ', nghia: 'Nhảy múa', vidu: '他们正在跳舞。', dichnghia: 'Họ đang nhảy múa.' },
            { hanzi: '照相', pinyin: 'zhàoxiàng', hanviet: 'Chiếu tướng', nghia: 'Chụp ảnh', vidu: '他正在照相。', dichnghia: 'Anh ấy đang chụp ảnh.' },
            { hanzi: '游泳', pinyin: 'yóuyǒng', hanviet: 'Du vịnh', nghia: 'Bơi lội', vidu: '她正在游泳呢。', dichnghia: 'Cô ấy đang bơi lội đấy.' },
            { hanzi: '电话卡', pinyin: 'diànhuàkǎ', hanviet: 'Điện thoại tạp', nghia: 'Thẻ điện thoại', vidu: '玛丽要买电话卡。', dichnghia: 'Mary muốn mua thẻ điện thoại.' },
            { hanzi: '服务员', pinyin: 'fúwùyuán', hanviet: 'Phục vụ viên', nghia: 'Nhân viên phục vụ', vidu: '她问服务员。', dichnghia: 'Cô ấy hỏi nhân viên phục vụ.' },
            { hanzi: '小姐', pinyin: 'xiǎojiě', hanviet: 'Tiểu thư', nghia: 'Cô, quý cô', vidu: '小姐，有电话卡吗？', dichnghia: 'Cô ơi, có thẻ điện thoại không?' },
            { hanzi: '多少钱', pinyin: 'duōshǎo qián', hanviet: 'Đa thiểu tiền', nghia: 'Bao nhiêu tiền', vidu: '你要多少钱的电话卡？', dichnghia: 'Bạn cần thẻ điện thoại bao nhiêu tiền?' },
            { hanzi: '张', pinyin: 'zhāng', hanviet: 'Trương', nghia: 'Tấm, tờ (lượng từ)', vidu: '要几张？只要一张。', dichnghia: 'Cần mấy tấm? Chỉ cần một tấm.' },
            { hanzi: '睡觉', pinyin: 'shuì jiào', hanviet: 'Thụy giác', nghia: 'Ngủ', vidu: '我睡觉了。', dichnghia: 'Tôi ngủ rồi.' },
            { hanzi: '去', pinyin: 'qù', hanviet: 'Khứ', nghia: 'Đi', vidu: '我下午要去书店。', dichnghia: 'Chiều tôi phải đi hiệu sách.' },
            { hanzi: '跟', pinyin: 'gēn', hanviet: 'Cân', nghia: 'Cùng, với', vidu: '想不想跟她一起去？', dichnghia: 'Có muốn cùng cô ấy đi không?' },
            { hanzi: '不太远', pinyin: 'bú tài yuǎn', hanviet: 'Bất thái viễn', nghia: 'Không quá xa', vidu: '书店不太远。', dichnghia: 'Hiệu sách không quá xa.' },
            { hanzi: '比较好', pinyin: 'bǐjiào hǎo', hanviet: 'Bỉ giác hảo', nghia: 'Khá tốt, tốt hơn', vidu: '骑车去比较好。', dichnghia: 'Đi xe đạp thì tốt hơn.' },
            { hanzi: '买', pinyin: 'mǎi', hanviet: 'Mãi', nghia: 'Mua', vidu: '她要买什么？', dichnghia: 'Cô ấy muốn mua gì?' },
            { hanzi: '她', pinyin: 'tā', hanviet: 'Tha', nghia: 'Cô ấy, bà ấy', vidu: '她没有《汉英词典》。', dichnghia: 'Cô ấy không có từ điển Hán-Anh.' },
            { hanzi: '我', pinyin: 'wǒ', hanviet: 'Ngã', nghia: 'Tôi', vidu: '我也想买一本。', dichnghia: 'Tôi cũng muốn mua một cuốn.' },
            { hanzi: '你', pinyin: 'nǐ', hanviet: 'Nhĩ', nghia: 'Bạn', vidu: '你是不是在听音乐？', dichnghia: 'Bạn có phải đang nghe nhạc không?' },
            { hanzi: '我们', pinyin: 'wǒmen', hanviet: 'Ngã môn', nghia: 'Chúng tôi, chúng ta', vidu: '我们有几门课？', dichnghia: 'Chúng ta có mấy môn học?' },
            { hanzi: '他们', pinyin: 'tāmen', hanviet: 'Tha môn', nghia: 'Họ, chúng nó', vidu: '他们在上课。', dichnghia: 'Họ đang học.' },
            { hanzi: '谁', pinyin: 'shéi', hanviet: 'Thùy', nghia: 'Ai', vidu: '谁教你们语法？', dichnghia: 'Ai dạy ngữ pháp cho các bạn?' }
        ];

        const flashcardContainer = document.getElementById('flashcard-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const jumpBtn = document.getElementById('jump-btn');
        const jumpInput = document.getElementById('jump-input');
        const counter = document.getElementById('counter');

        let currentIndex = 0;
        let isTransitioning = false; 
        const totalCards = cardData.length;
        
        // Biến xử lý Vuốt (Swipe)
        let touchstartX = 0;
        let touchendX = 0;
        const SWIPE_THRESHOLD = 50; 
        
        jumpInput.max = totalCards;
        
        function renderCard(index) {
            const currentCard = cardData[index];
            const cardElement = document.createElement('div');
            cardElement.className = 'card';
            cardElement.id = 'flashcard-' + index;

            // Mặt trước: Chữ Hán, Simsun, Đen
            cardElement.innerHTML = `
                <div class="card__face card__face--front">${currentCard.hanzi}</div>
                <div class="card__face card__face--back">
                    <div class="back-content">
                        <p class="pinyin">${currentCard.pinyin}</p>
                        <p class="hanviet">${currentCard.hanviet}</p>
                        <p class="nghia">${currentCard.nghia}</p>
                        <p class="vidu-han">${currentCard.vidu}</p>
                        <p class="dichnghia">${currentCard.dichnghia}</p>
                    </div>
                </div>
            `;
            
            // Xử lý sự kiện lật thẻ
            cardElement.addEventListener('click', () => {
                if (!isTransitioning) {
                    cardElement.classList.toggle('is-flipped');
                }
            });

            // --- Logic Swipe ---
            cardElement.addEventListener('touchstart', e => {
                touchstartX = e.changedTouches[0].screenX;
            }, false);

            cardElement.addEventListener('touchend', e => {
                touchendX = e.changedTouches[0].screenX;
                handleGesture();
            }, false);
            
            return cardElement;
        }
        
        function updateDisplay() {
            counter.textContent = `${currentIndex + 1} / ${totalCards}`;
        }

        function changeCard(newIndex, direction) {
            if (isTransitioning || newIndex === currentIndex) {
                return;
            }

            if (newIndex < 0) {
                newIndex = totalCards - 1;
            } else if (newIndex >= totalCards) {
                newIndex = 0;
            }

            isTransitioning = true;
            const oldCard = document.getElementById('flashcard-' + currentIndex);
            const newCard = renderCard(newIndex);
            
            let slideDirection = direction;
            if (!slideDirection) {
                slideDirection = (newIndex > currentIndex || (currentIndex === totalCards - 1 && newIndex === 0)) ? 'next' : 'prev';
            }
            
            newCard.style.left = slideDirection === 'next' ? '100%' : '-100%';
            flashcardContainer.appendChild(newCard);
            
            if (oldCard) {
                oldCard.classList.add(slideDirection === 'next' ? 'slide-next-out' : 'slide-prev-out');
            }

            setTimeout(() => {
                newCard.style.left = '0';
            }, 50); 

            setTimeout(() => {
                if (oldCard) {
                    oldCard.remove();
                }
                currentIndex = newIndex;
                updateDisplay();
                isTransitioning = false;
            }, 400); 
        }
        
        function goToNextCard() {
            const newIndex = (currentIndex + 1) % totalCards;
            changeCard(newIndex, 'next');
        }

        function goToPrevCard() {
            const newIndex = (currentIndex - 1 + totalCards) % totalCards;
            changeCard(newIndex, 'prev');
        }
        
        function jumpToCard() {
            const inputValue = parseInt(jumpInput.value);
            
            if (isNaN(inputValue) || inputValue < 1 || inputValue > totalCards) {
                alert(`Lỗi: Vui lòng nhập số thẻ hợp lệ từ 1 đến ${totalCards}.`);
                jumpInput.value = "";
                return;
            }
            
            const newIndex = inputValue - 1;

            const direction = (newIndex > currentIndex) ? 'next' : 'prev';
            
            changeCard(newIndex, direction);

            jumpInput.value = "";
        }

        function handleGesture() {
            if (isTransitioning) return;
            const deltaX = touchendX - touchstartX;
            
            if (Math.abs(deltaX) > SWIPE_THRESHOLD) {
                if (deltaX < 0) {
                    goToNextCard();
                } else {
                    goToPrevCard();
                }
            }
        }

        prevBtn.addEventListener('click', goToPrevCard);
        nextBtn.addEventListener('click', goToNextCard);
        jumpBtn.addEventListener('click', jumpToCard);
        
        jumpInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                jumpToCard();
            }
        });

        // Initial load
        document.addEventListener('DOMContentLoaded', () => {
            flashcardContainer.appendChild(renderCard(currentIndex));
            updateDisplay();
        });

    </script>
</body>
</html>