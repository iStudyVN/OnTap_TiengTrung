<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcard Tiếng Trung</title>
    <style>
        /* CSS để nhúng font Simsun */
        @font-face {
            font-family: 'Simsun';
            src: url(https://fonts.gstatic.com/s/simsun/v18/K9-BZD0b9T8xcP0Q.woff2) format('woff2');
            unicode-range: U+4E00-9FFF; /* Phạm vi cho ký tự Hán */
        }

        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 500px;
            padding: 20px;
            text-align: center;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .scene {
            width: 100%;
            height: 300px;
            perspective: 600px;
            position: relative;
        }

        .card {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            cursor: pointer;
            transition: 
                transform 0.6s, 
                opacity 0.3s, 
                left 0.4s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        /* --- HIỆU ỨNG TRƯỢT --- */
        .card.slide-next-out {
            transform: translateX(-100%) rotateY(0deg); 
            opacity: 0;
            pointer-events: none;
        }

        .card.slide-prev-out {
            transform: translateX(100%) rotateY(0deg); 
            opacity: 0;
            pointer-events: none;
        }

        .card__face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; 
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 12px;
            background: #ffffff;
        }

        /* YÊU CẦU: Mặt trước chữ Hán, font Simsun, màu đen, ở giữa */
        .card__face--front {
            font-family: 'Simsun', sans-serif; 
            font-size: 80px;
            color: #000000; /* Chữ màu đen */
        }

        .card__face--back {
            transform: rotateY(180deg);
            padding: 20px;
            box-sizing: border-box;
            flex-direction: column;
            align-items: center; 
            justify-content: center;
            text-align: center; 
            background: linear-gradient(135deg, #ecf0f1, #bdc3c7);
        }
        
        .back-content p {
            font-size: 1.3rem;
            margin: 8px 0;
            width: 100%;
            text-align: center; 
            font-weight: 500;
        }
        
        .back-content .pinyin { color: #e67e22; font-weight: bold; font-size: 1.6rem; } /* Màu cam */
        .back-content .hanviet { color: #8e44ad; } /* Màu tím */
        .back-content .nghia { color: #1f506b; font-style: italic; } /* Màu xanh đậm (thay vì #27ae60) */
        .back-content .vidu-han { color: #000000; font-family: 'Simsun', sans-serif; margin-top: 15px; font-size: 1.5rem; } /* Chữ Hán đen */
        .back-content .dichnghia { color: #000000; font-style: italic; font-size: 1rem; } /* Chữ đen */


        .navigation {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-button {
            padding: 10px 20px;
            border: none;
            background-color: #3498db;
            color: white;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 0 5px;
        }

        .nav-button:hover {
            background-color: #2980b9;
        }
        
        #counter {
            font-size: 1.1rem;
            font-weight: bold;
            color: #7f8c8d;
            flex-grow: 1;
            text-align: center;
        }
        
        .jump-control {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
            gap: 10px;
            flex-wrap: wrap;
        }

        #jump-input {
            width: 60px;
            padding: 8px;
            border: 2px solid #3498db;
            border-radius: 8px;
            text-align: center;
            font-size: 1rem;
        }
        
        .jump-button {
            background-color: #e74c3c; 
        }
        
        .jump-button:hover {
            background-color: #c0392b;
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>Flashcard Tiếng Trung</h1>
        <div class="scene">
            <div id="flashcard-container"></div>
        </div>
        <div class="navigation">
            <button class="nav-button" id="prev-btn">Trước</button>
            <span id="counter"></span>
            <button class="nav-button" id="next-btn">Sau</button>
        </div>
        
        <div class="jump-control">
            <input type="number" id="jump-input" min="1" max="30" placeholder="#">
            <button class="nav-button jump-button" id="jump-btn">Nhảy đến thẻ số</button>
        </div>
    </div>

    <script>
        // 30 từ vựng Hán ngữ giản thể được lấy từ shengci.txt
        const cardData = [
  { hanzi: '包裹', pinyin: 'bāoguǒ', hanviet: 'bao quả', nghia: 'Bưu phẩm, bưu kiện', vidu: '我去邮局寄包裹。', dichnghia: 'Tôi đi bưu điện gửi bưu phẩm.' },
  { hanzi: '顺便', pinyin: 'shùnbiàn', hanviet: 'thuận tiện', nghia: 'Nhân tiện, tiện thể', vidu: '你顺便买一本书吧。', dichnghia: 'Bạn nhân tiện mua một cuốn sách nhé.' },
  { hanzi: '替', pinyin: 'tì', hanviet: 'thế, thay', nghia: 'Thay, thay thế', vidu: '替我办一件事，行吗？', dichnghia: 'Thay tôi làm một việc, được không?' },
  { hanzi: '不用', pinyin: 'búyòng', hanviet: 'bất dụng', nghia: 'Không cần, không dùng', vidu: '不用谢。', dichnghia: 'Không cần cảm ơn.' },
  { hanzi: '用', pinyin: 'yòng', hanviet: 'dụng', nghia: 'Dùng, sử dụng', vidu: '你用什么手机？', dichnghia: 'Bạn dùng điện thoại gì?' },
  { hanzi: '飞', pinyin: 'fēi', hanviet: 'phi', nghia: 'Bay', vidu: '飞机。', dichnghia: 'Máy bay.' },
  { hanzi: '火车', pinyin: 'huǒchē', hanviet: 'hỏa xa', nghia: 'Tàu hỏa', vidu: '坐火车去。', dichnghia: 'Đi bằng tàu hỏa.' },
  { hanzi: '回来', pinyin: 'huílai', hanviet: 'hồi lai', nghia: 'Về, trở về (hướng về người nói)', vidu: '什么时候回来？', dichnghia: 'Khi nào trở về?' },
  { hanzi: '办', pinyin: 'bàn', hanviet: 'biện', nghia: 'Làm, giải quyết, làm thủ tục', vidu: '出去办点事。', dichnghia: 'Ra ngoài giải quyết chút việc.' },
  { hanzi: '旅行', pinyin: 'lǚxíng', hanviet: 'lữ hành', nghia: 'Du lịch', vidu: '你去上海旅行吗？', dichnghia: 'Bạn đi Thượng Hải du lịch phải không?' },
  { hanzi: '代表', pinyin: 'dàibiǎo', hanviet: 'đại biểu', nghia: 'Đại biểu, đại diện (danh/động từ)', vidu: '我代表公司欢迎您。', dichnghia: 'Tôi đại diện công ty chào mừng ngài.' },
  { hanzi: '团', pinyin: 'tuán', hanviet: 'đoàn', nghia: 'Đoàn, nhóm (danh từ/lượng từ)', vidu: '一个外贸代表团。', dichnghia: 'Một đoàn đại biểu ngoại thương.' },
  { hanzi: '邮票', pinyin: 'yóupiào', hanviet: 'bưu phiếu', nghia: 'Tem thư', vidu: '帮我买几张邮票。', dichnghia: 'Giúp tôi mua vài cái tem thư.' },
  { hanzi: '份', pinyin: 'fèn', hanviet: 'phần', nghia: 'Phần, số, bản (lượng từ cho báo, tạp chí)', vidu: '一份青年报。', dichnghia: 'Một bản báo Thanh niên.' },
  { hanzi: '参观', pinyin: 'cānguān', hanviet: 'tham quan', nghia: 'Tham quan', vidu: '去上海参观。', dichnghia: 'Đi Thượng Hải tham quan.' },
  { hanzi: '当', pinyin: 'dāng', hanviet: 'đương', nghia: 'Làm (một nghề, chức vụ), đảm nhận', vidu: '我去给他们当翻译。', dichnghia: 'Tôi đi làm phiên dịch cho họ.' },
  { hanzi: '帮', pinyin: 'bāng', hanviet: 'bang', nghia: 'Giúp', vidu: '帮我浇一下儿花。', dichnghia: 'Giúp tôi tưới hoa một chút.' },
  { hanzi: '青年', pinyin: 'qīngnián', hanviet: 'thanh niên', nghia: 'Thanh niên', vidu: '青年报。', dichnghia: 'Báo Thanh niên.' },
  { hanzi: '报', pinyin: 'bào', hanviet: 'báo', nghia: 'Báo chí (danh từ, dạng rút gọn)', vidu: '青年报。', dichnghia: 'Báo Thanh niên.' },
  { hanzi: '浇', pinyin: 'jiāo', hanviet: 'kiêu', nghia: 'Tưới, dội, đổ', vidu: '帮我浇一下儿花。', dichnghia: 'Giúp tôi tưới hoa một chút.' },
  { hanzi: '花', pinyin: 'huā', hanviet: 'hoa', nghia: '1. Hoa (danh từ) 2. Tiêu (tiền, thời gian) (động từ)', vidu: '帮我浇一下儿花。', dichnghia: 'Giúp tôi tưới hoa một chút.' },
  { hanzi: '报纸', pinyin: 'bàozhǐ', hanviet: 'báo chỉ', nghia: 'Báo chí', vidu: '买一份报纸。', dichnghia: 'Mua một bản báo.' },
  { hanzi: '翻译', pinyin: 'fānyì', hanviet: 'phiên dịch', nghia: 'Phiên dịch (danh/động từ)', vidu: '我去给他们当翻译。', dichnghia: 'Tôi đi làm phiên dịch cho họ.' },
  { hanzi: '没问题', pinyin: 'méi wèntí', hanviet: 'một vấn đề', nghia: 'OK, không vấn đề gì', vidu: '行，没问题。', dichnghia: 'Được, không vấn đề.' },
  { hanzi: '问题', pinyin: 'wèntí', hanviet: 'vấn đề', nghia: 'Vấn đề, câu hỏi', vidu: '老师常问你问题吗？', dichnghia: 'Thầy giáo có thường hỏi bạn câu hỏi không?' },
  { hanzi: '拿', pinyin: 'ná', hanviet: 'nã', nghia: 'Cầm, lấy, đem', vidu: '我回家拿点东西。', dichnghia: 'Tôi về nhà lấy ít đồ.' },
  { hanzi: '飞机', pinyin: 'fēijī', hanviet: 'phi cơ', nghia: 'Máy bay', vidu: '坐飞机去。', dichnghia: 'Đi bằng máy bay.' },
  { hanzi: '旅游', pinyin: 'lǚyóu', hanviet: 'lữ du', nghia: 'Du lịch (Động từ)', vidu: '我想去旅游。', dichnghia: 'Tôi muốn đi du lịch.' },
  { hanzi: '票', pinyin: 'piào', hanviet: 'phiếu', nghia: 'Vé', vidu: '我买了电影票。', dichnghia: 'Tôi đã mua vé xem phim rồi.' },
  { hanzi: '张', pinyin: 'zhāng', hanviet: 'trương', nghia: 'Tấm, tờ (lượng từ)', vidu: '一张邮票。', dichnghia: 'Một cái tem thư.' },
  { hanzi: '车票', pinyin: 'chēpiào', hanviet: 'xa phiếu', nghia: 'Vé xe', vidu: '我买了车票。', dichnghia: 'Tôi đã mua vé xe rồi.' },
  { hanzi: '停车票', pinyin: 'tíngchē piào', hanviet: 'đình xa phiếu', nghia: 'Vé đỗ xe', vidu: '请出示停车票。', dichnghia: 'Xin vui lòng xuất trình vé đỗ xe.' },
  { hanzi: '火车票', pinyin: 'huǒchē piào', hanviet: 'hỏa xa phiếu', nghia: 'Vé tàu hỏa', vidu: '你买火车票了吗？', dichnghia: 'Bạn đã mua vé tàu hỏa chưa?' },
  { hanzi: '机票', pinyin: 'jīpiào', hanviet: 'cơ phiếu', nghia: 'Vé máy bay', vidu: '机票很贵。', dichnghia: 'Vé máy bay rất đắt.' },
  { hanzi: '电影票', pinyin: 'diànyǐng piào', hanviet: 'điện ảnh phiếu', nghia: 'Vé xem phim', vidu: '我们去看电影票。', dichnghia: 'Chúng ta đi xem vé xem phim.' },
  { hanzi: '门票', pinyin: 'ménpiào', hanviet: 'môn phiếu', nghia: 'Vé vào cửa', vidu: '门票多少钱？', dichnghia: 'Vé vào cửa bao nhiêu tiền?' },
  { hanzi: '使用', pinyin: 'shǐyòng', hanviet: 'sử dụng', nghia: 'Dùng, sử dụng', vidu: '你会使用这个机器吗？', dichnghia: 'Bạn biết sử dụng cái máy này không?' },
  { hanzi: '回去', pinyin: 'huíqu', hanviet: 'hồi khứ', nghia: 'Về, trở về (hướng ra xa người nói)', vidu: '你快点回去吧。', dichnghia: 'Bạn mau về đi.' },
  { hanzi: '外贸', pinyin: 'wàimào', hanviet: 'ngoại mậu', nghia: 'Ngoại thương', vidu: '外贸代表团。', dichnghia: 'Đoàn đại biểu ngoại thương.' },
  { hanzi: '楼门口', pinyin: 'lóu ménkǒu', hanviet: 'lâu môn khẩu', nghia: 'Cửa ra vào tòa nhà/tầng lầu', vidu: '在楼门口遇见张东。', dichnghia: 'Gặp Trương Đông ở cửa tòa nhà.' },
  { hanzi: '邮局', pinyin: 'yóujú', hanviet: 'bưu cục', nghia: 'Bưu điện', vidu: '我去邮局寄包裹。', dichnghia: 'Tôi đi bưu điện gửi bưu phẩm.' },
  { hanzi: '书店', pinyin: 'shūdiàn', hanviet: 'thư điếm', nghia: 'Hiệu sách', vidu: '顺便去书店买一本书。', dichnghia: 'Nhân tiện đi hiệu sách mua một cuốn sách.' },
  { hanzi: '一会儿', pinyin: 'yīhuìr', hanviet: 'nhất hội', nghia: 'Một lát, chốc lát', vidu: '一会儿玛丽来找我。', dichnghia: 'Lát nữa Mary đến tìm tôi.' },
  { hanzi: '宿舍', pinyin: 'sùshè', hanviet: 'túc xá', nghia: 'Ký túc xá', vidu: '珍妮来宿舍找玛丽。', dichnghia: 'Jenny đến ký túc xá tìm Mary.' },
  { hanzi: '打电话', pinyin: 'dǎ diànhuà', hanviet: 'đả điện thoại', nghia: 'Gọi điện thoại', vidu: '妈妈打电话问我。', dichnghia: 'Mẹ gọi điện hỏi tôi.' },
  { hanzi: '什么时候', pinyin: 'shénme shíhou', hanviet: 'thập ma thời hậu', nghia: 'Khi nào', vidu: '什么时候回来？', dichnghia: 'Khi nào trở về?' },
  { hanzi: '上课', pinyin: 'shàngkè', hanviet: 'thượng khóa', nghia: 'Lên lớp, vào học', vidu: '上课的时候。', dichnghia: 'Lúc lên lớp.' },
  { hanzi: '聊天', pinyin: 'liáotiān', hanviet: 'liêu thiên', nghia: 'Trò chuyện, tán gẫu', vidu: '用汉语聊天。', dichnghia: 'Trò chuyện bằng tiếng Hán.' },
  { hanzi: '每天', pinyin: 'měitiān', hanviet: 'mỗi thiên', nghia: 'Mỗi ngày', vidu: '每天你花多长时间？', dichnghia: 'Mỗi ngày bạn dành bao nhiêu thời gian?' },
  { hanzi: '学汉语', pinyin: 'xué Hànyǔ', hanviet: 'học Hán ngữ', nghia: 'Học tiếng Hán', vidu: '每天你花多长时间学汉语？', dichnghia: 'Mỗi ngày bạn dành bao nhiêu thời gian học tiếng Hán?' }
];

        const flashcardContainer = document.getElementById('flashcard-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const jumpBtn = document.getElementById('jump-btn');
        const jumpInput = document.getElementById('jump-input');
        const counter = document.getElementById('counter');

        let currentIndex = 0;
        let isTransitioning = false; 
        const totalCards = cardData.length;
        
        // Biến xử lý Vuốt (Swipe)
        let touchstartX = 0;
        let touchendX = 0;
        const SWIPE_THRESHOLD = 50; 
        
        jumpInput.max = totalCards;
        
        function renderCard(index) {
            const currentCard = cardData[index];
            const cardElement = document.createElement('div');
            cardElement.className = 'card';
            cardElement.id = 'flashcard-' + index;

            // Mặt trước: Chữ Hán, Simsun, Đen
            cardElement.innerHTML = `
                <div class="card__face card__face--front">${currentCard.hanzi}</div>
                <div class="card__face card__face--back">
                    <div class="back-content">
                        <p class="pinyin">${currentCard.pinyin}</p>
                        <p class="hanviet">${currentCard.hanviet}</p>
                        <p class="nghia">${currentCard.nghia}</p>
                        <p class="vidu-han">${currentCard.vidu}</p>
                        <p class="dichnghia">${currentCard.dichnghia}</p>
                    </div>
                </div>
            `;
            
            // Xử lý sự kiện lật thẻ
            cardElement.addEventListener('click', () => {
                if (!isTransitioning) {
                    cardElement.classList.toggle('is-flipped');
                }
            });

            // --- Logic Swipe ---
            cardElement.addEventListener('touchstart', e => {
                touchstartX = e.changedTouches[0].screenX;
            }, false);

            cardElement.addEventListener('touchend', e => {
                touchendX = e.changedTouches[0].screenX;
                handleGesture();
            }, false);
            
            return cardElement;
        }
        
        function updateDisplay() {
            counter.textContent = `${currentIndex + 1} / ${totalCards}`;
        }

        function changeCard(newIndex, direction) {
            if (isTransitioning || newIndex === currentIndex) {
                return;
            }

            if (newIndex < 0) {
                newIndex = totalCards - 1;
            } else if (newIndex >= totalCards) {
                newIndex = 0;
            }

            isTransitioning = true;
            const oldCard = document.getElementById('flashcard-' + currentIndex);
            const newCard = renderCard(newIndex);
            
            let slideDirection = direction;
            if (!slideDirection) {
                slideDirection = (newIndex > currentIndex || (currentIndex === totalCards - 1 && newIndex === 0)) ? 'next' : 'prev';
            }
            
            newCard.style.left = slideDirection === 'next' ? '100%' : '-100%';
            flashcardContainer.appendChild(newCard);
            
            if (oldCard) {
                oldCard.classList.add(slideDirection === 'next' ? 'slide-next-out' : 'slide-prev-out');
            }

            setTimeout(() => {
                newCard.style.left = '0';
            }, 50); 

            setTimeout(() => {
                if (oldCard) {
                    oldCard.remove();
                }
                currentIndex = newIndex;
                updateDisplay();
                isTransitioning = false;
            }, 400); 
        }
        
        function goToNextCard() {
            const newIndex = (currentIndex + 1) % totalCards;
            changeCard(newIndex, 'next');
        }

        function goToPrevCard() {
            const newIndex = (currentIndex - 1 + totalCards) % totalCards;
            changeCard(newIndex, 'prev');
        }
        
        function jumpToCard() {
            const inputValue = parseInt(jumpInput.value);
            
            if (isNaN(inputValue) || inputValue < 1 || inputValue > totalCards) {
                alert(`Lỗi: Vui lòng nhập số thẻ hợp lệ từ 1 đến ${totalCards}.`);
                jumpInput.value = "";
                return;
            }
            
            const newIndex = inputValue - 1;

            const direction = (newIndex > currentIndex) ? 'next' : 'prev';
            
            changeCard(newIndex, direction);

            jumpInput.value = "";
        }

        function handleGesture() {
            if (isTransitioning) return;
            const deltaX = touchendX - touchstartX;
            
            if (Math.abs(deltaX) > SWIPE_THRESHOLD) {
                if (deltaX < 0) {
                    goToNextCard();
                } else {
                    goToPrevCard();
                }
            }
        }

        prevBtn.addEventListener('click', goToPrevCard);
        nextBtn.addEventListener('click', goToNextCard);
        jumpBtn.addEventListener('click', jumpToCard);
        
        jumpInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                jumpToCard();
            }
        });

        // Initial load
        document.addEventListener('DOMContentLoaded', () => {
            flashcardContainer.appendChild(renderCard(currentIndex));
            updateDisplay();
        });

    </script>
</body>

</html>

